:root{
  --bg:#0f1215; --surface:#171a1f; --text:#e8eaed; --muted:#a3a8b0; --line:#242a31;
  --ember:#ef4444; --amber:#f59e0b;
  --conf-low:var(--amber); --conf-nominal:#ef4444; --conf-high:#dc2626;
  --container:1080px; --radius:16px; --shadow:0 8px 22px rgba(0,0,0,.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text); line-height:1.7;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
h1,h2,h3{font-family:"Source Serif 4",Georgia,serif; line-height:1.22; margin:0 0 .5rem}
p{margin:0 0 1rem}
.container{width:min(100% - 2rem, var(--container)); margin-inline:auto}
.narrow{max-width:70ch}

.page-header{
  border-bottom:1px solid var(--line);
  background: radial-gradient(1200px 400px at 50% 100%, rgba(239,68,68,.10), transparent 70%),
              linear-gradient(to bottom, rgba(23,26,31,.85), rgba(23,26,31,.65));
}
.site-title{font-size:clamp(2rem,4vw,3rem); padding-top:2.6rem}
.site-subtitle{color:var(--muted); padding-bottom:2rem}
.page-footer{border-top:1px solid var(--line); padding:2rem 0; color:var(--muted)}

.section{padding:clamp(2.2rem,5vw,4rem) 0; border-bottom:1px solid var(--line)}
.section-title{font-size:clamp(1.5rem,3vw,2rem); margin-bottom:.4rem}
.section-desc,.lead{color:var(--muted); margin-bottom:1rem}
.lead{font-size:1.05rem}

.figure{
  margin-top:1rem; background:var(--surface); border:1px solid var(--line);
  border-radius:var(--radius); padding:.75rem; box-shadow:var(--shadow)
}

.vis-slot{width:100%; aspect-ratio:16/9; border-radius:calc(var(--radius) - 8px); overflow:hidden}
.align-left{max-width:2000px; margin:0 auto 0 0}
.align-right{max-width:5000px; margin:0 0 0 auto}
.align-center{max-width:2000px; margin:0 auto}

.caption{color:var(--muted); font-size:.95rem; margin-top:.5rem}

@media (max-width:780px){
  .align-left,.align-right,.align-center{max-width:100%; margin:0 auto}
}
@media print{
  body{background:#fff; color:#000}
  .figure{box-shadow:none}
}

.vis-row {
  display: grid;
  grid-template-columns: 1fr;     
  gap: 1rem;
  align-items: start;
}

@media (min-width: 900px) {
  .vis-row.two-col {
    grid-template-columns: 2fr 1fr;  
  }
  .vis-row.two-col.swap {
    grid-template-columns: 1fr 2fr; 
  }
}

.text-block {
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 1rem;
  box-shadow: var(--shadow);
  color: var(--text);
  line-height: 1.6;
}
.text-block h3 { margin: 0 0 .4rem; font-size: 1.05rem; }
.text-block p { margin: 0 0 .6rem; }
.text-block .muted { color: var(--muted); font-size: .95rem; }

.figure.tight { padding: .5rem; }

.vis-slot { overflow: visible; }

.has-filters {               
  aspect-ratio: auto;          
  min-height: 520px;            
}

.figure .vega-bindings {
  margin: 0 0 .6rem 0;
  display: flex; flex-wrap: wrap; gap: .5rem 1rem;
}
.figure .vega-bindings label { color: var(--text); font-size: .95rem; }
.figure .vega-bindings input,
.figure .vega-bindings select {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--line);
  border-radius: 8px;
  padding: .35rem .5rem;
}
